<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.doit.ik.mapper.DeptEmpSalgradeMapper">
	<!-- List<DeptEmpSalgradeDTO> getDeptEmpInfo(); SL05_MYBATIS 이전코딩 [1] <select 
		id="getDeptEmpInfo" resultType="DeptEmpSalgradeDTO"> SELECT d.deptno, dname, 
		empno, ename, job, hiredate, sal, grade FROM emp e JOIN dept d ON d.deptno 
		= e.deptno JOIN salgrade s ON sal BETWEEN losal AND hisal ORDER BY d.deptno 
		ASC </select> -->

	<!-- [2] <resultMap type="DeptEmpSalgradeDTO" id="deptEmpResultMap"> <id 
		column="empno" property="empno"/> <result property="deptno" column="deptno"/> 
		<result property="dname" column="dname"/> <result property="empno" column="empno"/> 
		<result property="ename" column="ename"/> <result property="job" column="job"/> 
		<result property="hiredate" column="hiredate"/> <result property="sal" column="sal"/> 
		<result property="grade" column="grade"/> </resultMap> <select id="getDeptEmpInfo" 
		resultMap="deptEmpResultMap"> SELECT d.deptno, dname, empno, ename, job, 
		hiredate, sal, grade FROM emp e JOIN dept d ON d.deptno = e.deptno JOIN salgrade 
		s ON sal BETWEEN losal AND hisal ORDER BY d.deptno ASC </select> -->


	<!-- 1. 모든 부서정보를 조회 List<DeptEmpSalgradeDTO> getDept(); -->
	<select id="getDept" resultType="DeptEmpSalgradeDTO">
		SELECT *
		FROM dept
		ORDER BY deptno
		ASC
	</select>


	<!-- 2. 해당 부서원 정보를 조회 List<EmpDTO> getEmpOfDept(int deptno); -->
	<resultMap type="EmpDTO" id="empResultMap">
	<id property="empno" column="empno" />   
      <result property="ename" column="ename" />
      <result property="job" column="job" />
      <result property="hiredate" column="hiredate" />
      <result property="sal" column="sal" />
      <!-- EmpDTO - SalgradDTO  1:1 연관 관계 -->
      <association property="salgradeDTO" javaType="SalgradeDTO">
        <result property="grade" column="grade" />
      </association>
	</resultMap>
	<select id="getEmpOfDept" resultMap="empResultMap">
		SELECT
		empno, ename, job, hiredate, sal, grade
		FROM emp e JOIN salgrade s ON sal
		BETWEEN losal AND hisal
		WHERE deptno = #{deptno}
	</select>



</mapper>  
